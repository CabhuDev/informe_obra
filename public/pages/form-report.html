<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-JJPR65MK21"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-JJPR65MK21');
  </script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Informe semanal de obra</title>  <!-- Custom CSS - Order matters for proper inheritance -->
  <link rel="stylesheet" href="../css/style.css" />
  <link rel="stylesheet" href="../css/form-report-enhanced.css" />

  <!-- Favicon -->
  <link rel="icon" type="image/webp" href="../assets/favicon.webp">
  <link rel="apple-touch-icon" sizes="180x180" href="../assets/favicon.webp">
  <link rel="shortcut icon" href="../assets/favicon.webp">
  <link rel="manifest" href="../assets/site.webmanifest">
<meta name="theme-color" content="#3B8C88">
<meta name="apple-mobile-web-app-status-bar-style" content="#3B8C88">

</head>

<body class="form-report-page">  <main class="container">
    <!-- BotÃ³n de navegaciÃ³n -->
    <div class="nav-header">
      <a href="../pages/landing.html" class="back-button" title="Volver al inicio">
        â† Volver al inicio
      </a>
    </div>
    
    <!-- Hero Section Integrada -->
    <div class="hero-banner">
      <div class="hero-content">
        <div class="hero-text">
          <h1>ğŸ“‹ Informe semanal</h1>
          <p class="hero-subtitle">Crea informes profesionales de obra con fotos, audio y seguimiento de avance</p>
        </div>
        <div class="hero-image">
          <img src="../assets/hero.png" alt="Obratec - Sistema de Informes de Obra" class="hero-img" />
        </div>
      </div>
    </div>

    <form id="obraForm" autocomplete="off">
      <label>
        Email
        <input type="email" name="email" placeholder="Email donde te llegarÃ¡ el informe" required />
      </label>

      <label>
        Proyecto
        <input name="projectName" placeholder="Nombre obra" required />
      </label>

      <label>
        Fecha
        <input type="date" name="date" required />
      </label>

      <label>
        Avance (%)  
        <input type="number" name="advance" min="0" max="100" required />
      </label>

      <label>
        Observaciones
        <textarea name="observations" rows="3"></textarea>
      </label>      <label>
        Incidencias
        <textarea name="incidences" rows="3"></textarea>
      </label>      <div class="photos-section">
        <label>Fotos del proyecto (mÃ¡x 5):</label>
        <div class="photo-upload">          <!-- Input para subir archivos -->
          <input type="file" id="photoInput" accept="image/*" multiple class="hidden-input" />
          <!-- Input para captura de cÃ¡mara en mÃ³vil -->
          <input type="file" id="cameraInput" accept="image/*" capture="environment" class="hidden-input" />
          
          <!-- Modal para cÃ¡mara en desktop -->
          <div id="cameraModal" class="camera-modal-hidden">
            <div class="camera-content">
              <video id="cameraVideo" autoplay muted></video>
              <canvas id="cameraCanvas" class="hidden"></canvas>
              <div class="camera-controls">
                <button type="button" id="captureBtn" class="outline">ğŸ“¸ Capturar</button>
                <button type="button" id="closeCameraBtn" class="outline">âŒ Cerrar</button>
              </div>
            </div>
          </div>
        </div><div id="photosContainer" class="photos-grid">
          <div id="emptyStatePhotos" class="empty-state" role="region" aria-label="Zona para aÃ±adir fotos">
            <div class="empty-state-content">
              <img src="../assets/empty-state.png" alt="IlustraciÃ³n de cÃ¡mara - Sin fotos aÃ±adidas aÃºn" class="empty-state-img" />
              <h3>ğŸ“· AÃ±ade fotos a tu informe</h3>
              <p>Las fotos ayudan a documentar el progreso de la obra de manera visual y profesional</p>              <div class="empty-state-tips" role="list" aria-label="Opciones disponibles">
                <span class="tip clickable" role="listitem" aria-label="OpciÃ³n: Tomar foto con cÃ¡mara" 
                      data-action="take-photo" tabindex="0">ğŸ“¸ Tomar foto</span>
                <span class="tip clickable" role="listitem" aria-label="OpciÃ³n: Subir archivo desde dispositivo" 
                      data-action="upload-photo" tabindex="0">ğŸ“ Subir archivo</span>
                <span class="tip info" role="listitem" aria-label="LÃ­mite: MÃ¡ximo 5 fotos permitidas">ğŸ’¡ MÃ¡ximo 5 fotos</span>
              </div>
            </div>
          </div>
        </div>
      </div>      
      
      <div class="audio-recorder">
        <label>Observaciones de voz:</label>
        <div class="recorder-controls">
          <button type="button" id="startRecording" class="outline">ğŸ™ï¸ Iniciar grabaciÃ³n</button>
          <button type="button" id="stopRecording" class="outline" disabled>â¹ï¸ Detener</button>
          <div class="recording-status-container">
            <span id="recordingStatus"></span>            <div id="audioVisualizerContainer" class="audio-visualizer-hidden">
              <img src="assets/audio-bars.svg" alt="Grabando..." class="audio-visualizer" />
            </div>
          </div>
        </div>
        <audio id="audioPlayback" controls class="audio-playback-hidden"></audio>
        <!-- Este campo oculto almacenarÃ¡ el audio como base64 -->
        <input type="hidden" name="audioData" id="audioData">
      </div>        <button type="submit">Enviar informe</button>
    </form>    <div id="loadingContainer" class="loading-container-hidden">
      <img src="assets/enviando-informe.svg" alt="Enviando informe..." class="loading-icon" />
      <span class="loading-text">Enviando informe...</span>
    </div><p id="status"></p>
      <!-- Scripts optimizados -->
    <script src="../js/cssUtils.js"></script>
    <script src="../js/heicConverter.js"></script>
    <script src="../js/script.js"></script>
    <script src="../js/audioRecord.js"></script>
    <script src="../js/photoManager.js"></script>
</body>
</html>
